!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.frameAnimation=e():t.frameAnimation=e()}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){var i=n(1),o=n(2),r=0;function s(t){t&&t()}function a(){this.taskQueue=[],this.index=0,this.timeline=new o,this.state=r}a.prototype.loadImage=function(t){return this._add(function(e){i(t,e)},0)},a.prototype.changePosition=function(t,e,n){var i,o,r=e.length;if(r){var a=this;i=function(i,s){n&&(t.style.backgroundImage="url("+n+")");var u=Math.min(s/a.interval|0,r-1),c=e[u].split(" ");t.style.backgroundPosition=c[0]+"px "+c[1]+"px",u===r-1&&i(),o=1}}else i=s,o=0;return this._add(i,o)},a.prototype.changeSrc=function(t,e){var n,i,o=e.length;if(o){var r=this;n=function(n,i){var s=Math.min(i/r.interval|0,o-1);t.src=e[s],s==o-1&&n()},i=1}else n=s,i=0;return _add(n,i)},a.prototype.enterFrame=function(t){return this._add(t,1)},a.prototype.then=function(t){return this._add(function(e){t(),e()},0)},a.prototype.start=function(t){return 1===this.state?this:this.taskQueue.length?(this.state=1,this.interval=t,this._runTask(),this):this},a.prototype.repeat=function(t){var e=this;return this._add(function(){if(void 0===t)return e.index--,void e._runTask();if(t)t--,e.index--,e._runTask();else{var n=e.taskQueue[e.index];e._next(n)}},0)},a.prototype.repeatForever=function(){return this.repeat()},a.prototype.wait=function(t){return this.taskQueue&&this.taskQueue.length>0&&(this.taskQueue[this.taskQueue.length-1].wait=t),this},a.prototype.pause=function(){return 1===this.state?(this.state=2,this.timeline.stop(),this):this},a.prototype.restart=function(){return 2===this.state?(this.state=1,this.timeline.restart(),this):this},a.prototype.dispose=function(){return this.state!==r?(this.state=r,this.taskQueue=null,this.timeline.stop(),this.timeline=null,this):this},a.prototype._add=function(t,e){return this.taskQueue.push({taskFn:t,type:e}),this},a.prototype._runTask=function(){if(this.taskQueue&&1===this.state)if(this.index!==this.taskQueue.length){var t=this.taskQueue[this.index];0===t.type?this._syncTask(t):this._asyncTask(t)}else this.dispose()},a.prototype._syncTask=function(t){var e=this;(0,t.taskFn)(function(){e._next(t)})},a.prototype._asyncTask=function(t){var e=this;this.timeline.onenterframe=function(n){(0,t.taskFn)(function(){e.timeline.stop(),e._next(t)},n)},this.timeline.start(this.interval)},a.prototype._next=function(t){this.index++;var e=this;t.wait?setTimeout(function(){e._runTask()},t.wait):this._runTask()},t.exports=function(){return console.log("Animation",a),new a}},function(t,e){var n=0;t.exports=function(t,e,i){var o=0,r=!0,s=0,a=!1;for(var u in t)if(console.log(u,t),t.hasOwnProperty(u)){var c=t[u];"string"==typeof c&&(c=t[u]={src:c}),c&&c.src&&(o++,c.id="__img__"+u+ ++n,c.img=window[c.id]=new Image,h(c))}function h(t){console.log(t,"item-doLoad"),t.status="loading";var n=t.img;function i(){n.onload=n.onerror=null;try{delete window[t.id]}catch(t){}--o||a||(console.log("loadImage---4"),clearTimeout(s),e(r))}n.onload=function(){r&=!0,t.status="loaded";var e=document.createElement("canvas");e.width=n.width,e.height=n.height,e.getContext("2d").drawImage(n,0,0,n.width,n.height);var o=e.toDataURL("image/png",.6);t.img=o,i()},n.onerror=function(){r=!1,t.status="error",i()},n.src=t.src}o?i&&(s=setTimeout(function(){a=!0,e(!1)},i)):e(r)}},function(t,e,n){"use strict";var i=0,o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(t){return window.setTimeout(t,t.interval||1e3/60)},r=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||function(t){return window.clearTimeout(t)};function s(){this.animationHandler=0,this.state=i}function a(t,e){t.startTime=e,i.interval=t.interval;var n=+new Date;function i(){var r=+new Date;t.animationHandler=o(i),r-n>=t.interval&&(t.onenterframe(r-e),n=r)}i()}s.prototype.onenterframe=function(t){},s.prototype.start=function(t){1!==this.state&&(this.state=1,this.interval=t||1e3/60,a(this,+new Date))},s.prototype.stop=function(){1===this.state&&(this.state=2,this.startTime&&(this.dur=+new Date-this.startTime),r(this.animationHandler))},s.prototype.restart=function(){1!==!this.state&&this.dur&&this.interval&&(this.state=1,a(this,+new Date-this.dur))},t.exports=s}])});